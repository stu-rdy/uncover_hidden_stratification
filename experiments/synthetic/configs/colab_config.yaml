# Google Colab Configuration - Bissoto et al. Reproduction
experiment:
  name: "synthetic_colab_run"
  seed: 42

wandb:
  project: "synthetic_imagenette"
  entity: null
  tags: ["colab", "resnet18", "bissoto-reproduction", "synthetic"]
  notes: "Reproduction of 'Subgroup Performance in Hidden Stratifications' (Bissoto et al.)"

metrics:
  log_worst_group: true
  log_balanced_acc: true
  log_confusion_matrix: true
  log_training_metrics: true

# Synthetic artifact injection settings (Bissoto et al. methodology)
synthetic:
  biased_class_idx: 0
  hidden_artifact: "hospital_tag"  # Hidden stratification (biased)
  known_artifact: "vertical_line"  # Known attribute (independent)
  prob_hidden_biased: 0.8  # Align with paper's maximum bias
  prob_hidden_others: 0.05 # Small amount of leakage (more realistic)
  prob_known: 0.25
  blur_sigma: 2.0    # Moderately blurry (features detectable but 'harder')
  noise_std: 0.03    # Subtle grain
  grayscale: true    # X-ray style

data:
  batch_size: 64
  num_workers: 2
  image_size: 224

model:
  arch: "resnet18"
  pretrained: false

training:
  epochs: 15
  learning_rate: 0.001
  momentum: 0.9
  weight_decay: 0.0001
  device: "cuda"
  early_stopping:
    enabled: true
    patience: 5
    monitor: "worst_group_acc"

analysis:
  n_slices: 15  # Bissoto et al. use 15 subgroups
  weight: 10.0
